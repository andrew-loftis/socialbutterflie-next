(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93842,e=>{"use strict";var a=e.i(43476);function t({title:e,subtitle:t,actions:s}){return(0,a.jsxs)("header",{className:"page-header",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:e}),(0,a.jsx)("p",{children:t})]}),s?(0,a.jsx)("div",{className:"page-actions",children:s}):null]})}e.s(["PageHeader",()=>t])},43531,e=>{"use strict";let a=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],43531)},84614,e=>{"use strict";let a=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],84614)},78098,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(92989);e.i(51718);var i=e.i(18357);e.i(36180);var l=e.i(98925);e.i(61086);var r=e.i(27215),n=e.i(93842),o=e.i(95938),d=e.i(67426),c=e.i(75254);let p=(0,c.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var u=e.i(84614),h=e.i(63488);let m=(0,c.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var f=e.i(43531),g=e.i(37727);function y(){let{user:e,logout:c}=(0,o.useAuth)(),y=(0,s.useRouter)(),x=(e?.displayName??e?.email??"?").split(/[\s@]/).filter(Boolean).slice(0,2).map(e=>e[0].toUpperCase()).join(""),[j,v]=(0,t.useState)(!1),[b,N]=(0,t.useState)(!1),[S,w]=(0,t.useState)(e?.displayName??""),[U,k]=(0,t.useState)(""),[R,z]=(0,t.useState)(""),[C,T]=(0,t.useState)(e?.photoURL??""),[A,L]=(0,t.useState)(null),[P,E]=(0,t.useState)(!1),[M,D]=(0,t.useState)(null),[B,I]=(0,t.useState)(!1);async function F(){if(d.firebaseAuth?.currentUser){E(!0),D(null);try{let e=C;if(A){if(!d.firebaseStorage)throw Error("Firebase Storage is not configured.");let a=A.name.includes(".")?A.name.split(".").pop():"jpg",t=(0,r.ref)(d.firebaseStorage,`users/${d.firebaseAuth.currentUser.uid}/profile/avatar.${a}`);await (0,r.uploadBytes)(t,A,{contentType:A.type}),e=await (0,r.getDownloadURL)(t),T(e)}if(await (0,i.updateProfile)(d.firebaseAuth.currentUser,{displayName:S.trim(),photoURL:e||null}),d.firestore){let a=(0,l.doc)(d.firestore,"users",d.firebaseAuth.currentUser.uid,"profile","public");await (0,l.setDoc)(a,{displayName:S.trim(),title:U.trim(),bio:R.trim(),photoURL:e||"",updatedAt:new Date().toISOString()},{merge:!0})}L(null),v(!1),I(!0),setTimeout(()=>I(!1),3e3)}catch(e){D(e instanceof Error?e.message:"Failed to update profile.")}finally{E(!1)}}}async function H(){await c(),y.push("/")}return(0,t.useEffect)(()=>{w(e?.displayName??""),T(e?.photoURL??"")},[e?.displayName,e?.photoURL]),(0,t.useEffect)(()=>{(async function(){if(e?.uid&&d.firestore){N(!0);try{let a=(0,l.doc)(d.firestore,"users",e.uid,"profile","public"),t=await (0,l.getDoc)(a);if(t.exists()){let a=t.data();k(a.title||""),z(a.bio||""),a.displayName&&!e.displayName&&w(a.displayName),a.photoURL&&!e.photoURL&&T(a.photoURL)}}catch(e){D(e instanceof Error?e.message:"Failed to load profile.")}finally{N(!1)}}})().catch(()=>void 0)},[e?.uid,e?.displayName,e?.photoURL]),(0,a.jsxs)("div",{className:"page",children:[(0,a.jsx)(n.PageHeader,{title:"My Profile",subtitle:"Manage your account details and authentication."}),(0,a.jsxs)("section",{className:"panel",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px"},children:[(0,a.jsx)("div",{style:{width:64,height:64,borderRadius:"50%",background:"var(--accent)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.4rem",fontWeight:700,flexShrink:0,overflow:"hidden"},children:C?(0,a.jsx)("img",{src:C,alt:"Profile avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):x}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:S||e?.displayName||"No display name"}),(0,a.jsx)("p",{style:{color:"var(--fg-muted)",margin:"2px 0 0",fontSize:"0.85rem"},children:e?.email}),U?(0,a.jsx)("p",{style:{color:"var(--fg-muted)",margin:"2px 0 0",fontSize:"0.8rem"},children:U}):null]})]}),(0,a.jsxs)("div",{className:"form-field",children:[(0,a.jsxs)("label",{className:"form-label",children:[(0,a.jsx)(u.User,{className:"h-4 w-4",style:{display:"inline",marginRight:6,verticalAlign:"middle"}}),"Account details"]}),j?(0,a.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,a.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,a.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Display Name"}),(0,a.jsx)("input",{className:"input",value:S,onChange:e=>w(e.target.value),autoFocus:!0,disabled:P})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,a.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Title"}),(0,a.jsx)("input",{className:"input",value:U,onChange:e=>k(e.target.value),disabled:P,placeholder:"Creative Director"})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,a.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Bio"}),(0,a.jsx)("textarea",{className:"input",value:R,onChange:e=>z(e.target.value),disabled:P,placeholder:"Tell your team and clients about your role and expertise.",rows:4,style:{resize:"vertical"}})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,a.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Profile image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>L(e.target.files?.[0]||null),disabled:P})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,a.jsxs)("button",{className:"btn-primary",onClick:F,disabled:P,type:"button",children:[(0,a.jsx)(f.Check,{className:"h-4 w-4"}),"Save profile"]}),(0,a.jsxs)("button",{className:"btn-ghost",onClick:()=>{v(!1),w(e?.displayName??""),T(e?.photoURL??""),L(null)},type:"button",children:[(0,a.jsx)(g.X,{className:"h-4 w-4"}),"Cancel"]})]})]}):(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)("span",{className:"input",style:{flex:1,color:S?"inherit":"var(--fg-muted)"},children:S||"Not set"}),(0,a.jsxs)("button",{className:"btn-ghost",onClick:()=>v(!0),type:"button",children:[(0,a.jsx)(m,{className:"h-4 w-4"}),"Edit"]})]}),M?(0,a.jsx)("p",{style:{color:"var(--error, #e74c3c)",marginTop:6,fontSize:"0.82rem"},children:M}):null,b?(0,a.jsx)("p",{style:{color:"var(--fg-muted)",marginTop:6,fontSize:"0.82rem"},children:"Loading profile..."}):null,B?(0,a.jsx)("p",{style:{color:"var(--success, #27ae60)",marginTop:6,fontSize:"0.82rem"},children:"Profile updated."}):null,!j&&R?(0,a.jsx)("p",{style:{color:"var(--fg-muted)",marginTop:10,fontSize:"0.84rem",whiteSpace:"pre-wrap"},children:R}):null]}),(0,a.jsxs)("div",{className:"form-field",style:{marginTop:16},children:[(0,a.jsxs)("label",{className:"form-label",children:[(0,a.jsx)(h.Mail,{className:"h-4 w-4",style:{display:"inline",marginRight:6,verticalAlign:"middle"}}),"Email Address"]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)("span",{className:"input",style:{flex:1,color:"var(--fg-muted)",userSelect:"all"},children:e?.email??"-"}),(0,a.jsx)("span",{className:"badge",children:"Read-only"})]}),(0,a.jsx)("p",{style:{fontSize:"0.78rem",color:"var(--fg-muted)",marginTop:4},children:"Email is set by your authentication provider and cannot be changed here."})]})]}),(0,a.jsxs)("section",{className:"panel",children:[(0,a.jsx)("h3",{children:"Authentication"}),(0,a.jsxs)("p",{children:["You are signed in via ",(0,a.jsx)("strong",{children:e?.providerData?.[0]?.providerId??"email/password"}),"."]}),(0,a.jsx)("div",{className:"button-row",style:{marginTop:12},children:(0,a.jsxs)("button",{className:"btn-ghost",type:"button",onClick:H,style:{color:"var(--error, #e74c3c)"},children:[(0,a.jsx)(p,{className:"h-4 w-4"}),"Sign out"]})})]})]})}e.s(["default",()=>y],78098)}]);