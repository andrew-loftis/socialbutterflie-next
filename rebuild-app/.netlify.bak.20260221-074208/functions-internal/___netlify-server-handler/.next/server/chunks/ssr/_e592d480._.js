module.exports=[51538,a=>{"use strict";var b=a.i(87924);function c({title:a,subtitle:c,actions:d}){return(0,b.jsxs)("header",{className:"page-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:a}),(0,b.jsx)("p",{children:c})]}),d?(0,b.jsx)("div",{className:"page-actions",children:d}):null]})}a.s(["PageHeader",()=>c])},30666,a=>{"use strict";var b=a.i(72131),c=a.i(22168);function d(){let{appContext:a,companies:d,setActiveCompany:e,markCompanyGateSeen:f}=(0,c.useAppState)();return{activeCompany:(0,b.useMemo)(()=>d.find(b=>b.id===a.activeCompanyId)||null,[a.activeCompanyId,d]),activeCompanyId:a.activeCompanyId,companies:d,setActiveCompany:a=>{e(a),f(!!a)}}}a.s(["useActiveCompany",()=>d])},92759,a=>{"use strict";let b=(0,a.i(70106).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},10671,a=>{"use strict";var b=a.i(72131),c=a.i(30666);function d(){let{activeCompany:a}=(0,c.useActiveCompany)(),d=(0,b.useMemo)(()=>a?.assets||[],[a]);return{assets:d,hasAssets:d.length>0}}a.s(["useCompanyAssets",()=>d])},65557,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(60702),f=a.i(70106);let g=(0,f.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),h=(0,f.default)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]),i=(0,f.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),j=(0,f.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var k=a.i(92759);let l=(0,f.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var m=a.i(8406),n=a.i(14491),o=a.i(51538),p=a.i(22168),q=a.i(30666),r=a.i(10671),s=a.i(89195);let t=["Instagram","Facebook","LinkedIn","TikTok"];function u(){let{user:a}=(0,s.useAuth)(),{appContext:f}=(0,p.useAppState)(),{activeCompany:u}=(0,q.useActiveCompany)(),{assets:v}=(0,r.useCompanyAssets)(),[w,x]=(0,d.useState)("Instagram"),[y,z]=(0,d.useState)(""),[A,B]=(0,d.useState)(""),[C,D]=(0,d.useState)(""),[E,F]=(0,d.useState)(""),[G,H]=(0,d.useState)(!1),[I,J]=(0,d.useState)(null),K={Instagram:"instagram",Facebook:"facebook",TikTok:"tiktok",LinkedIn:null};async function L(b){let c=K[w];if(!c)return void J(`${w} scheduling is not wired yet. Connect Instagram/Facebook/TikTok for now.`);if(!a?.uid)return void J("Sign in to schedule posts.");if(!E.trim())return void J("Media URL is required for scheduling.");if("pending"===b&&!C)return void J("Schedule time is required.");H(!0),J(null);try{let d="pending"===b?new Date(C).toISOString():new Date(Date.now()+3e5).toISOString(),e=await fetch("/.netlify/functions/api?path=/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.uid,org_id:f.workspaceId,provider:c,caption:y,mediaUrl:E.trim(),when:d,workflowStatus:b,campaignId:A||void 0})});if(!e.ok)throw Error(await e.text());J("draft"===b?"Saved as draft.":"review"===b?"Submitted for review.":"Post scheduled.")}catch(a){J(a instanceof Error?a.message:"Failed to save post.")}finally{H(!1)}}return u?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(o.PageHeader,{title:"Build Post",subtitle:`Compose with ${u.name} context, then schedule.`,actions:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{className:"btn-ghost btn-sm",type:"button",children:[(0,b.jsx)(m.Sparkles,{className:"h-3.5 w-3.5"})," AI assist"]}),(0,b.jsxs)("button",{className:"btn-primary btn-sm",type:"button",onClick:()=>L("pending"),disabled:G,children:[(0,b.jsx)(e.CalendarDays,{className:"h-3.5 w-3.5"})," Schedule Post"]})]})}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:12},children:[(0,b.jsxs)("section",{className:"panel",children:[(0,b.jsx)("h3",{style:{position:"relative",zIndex:1},children:"Composer"}),(0,b.jsx)("div",{style:{display:"flex",gap:6,position:"relative",zIndex:1},children:t.map(a=>(0,b.jsx)("button",{className:`chip${w===a?" active":""}`,type:"button",onClick:()=>x(a),children:a},a))}),(0,b.jsxs)("div",{style:{position:"relative",zIndex:1},children:[(0,b.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,b.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Caption"}),(0,b.jsx)("textarea",{rows:6,placeholder:`Write your ${w} caption for ${u.name}…`,value:y,onChange:a=>z(a.target.value)})]}),(0,b.jsxs)("div",{style:{textAlign:"right",fontSize:"0.72rem",color:"var(--muted)",marginTop:4},children:[y.length," chars"]})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,position:"relative",zIndex:1},children:[(0,b.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,b.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Campaign"}),(0,b.jsx)("input",{placeholder:"Campaign name",value:A,onChange:a=>B(a.target.value)})]}),(0,b.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,b.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Schedule"}),(0,b.jsx)("input",{type:"datetime-local",value:C,onChange:a=>D(a.target.value)})]})]}),(0,b.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6,position:"relative",zIndex:1},children:[(0,b.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Media URL"}),(0,b.jsx)("input",{placeholder:"https://.../image-or-video.jpg",value:E,onChange:a=>F(a.target.value)})]}),(0,b.jsxs)("div",{className:"upload-zone",style:{position:"relative",zIndex:1},children:[(0,b.jsx)(h,{className:"h-5 w-5",style:{color:"var(--muted)"}}),(0,b.jsxs)("span",{style:{fontSize:"0.82rem",color:"var(--muted)"},children:["Drag & drop media, or ",(0,b.jsx)("span",{style:{color:"var(--company-primary)",cursor:"pointer"},children:"browse"})]}),v.length>0&&(0,b.jsxs)("span",{style:{fontSize:"0.72rem",color:"var(--muted)"},children:[v.length," company assets available"]})]}),(0,b.jsxs)("div",{className:"button-row",style:{position:"relative",zIndex:1},children:[(0,b.jsx)("button",{className:"btn-ghost",type:"button",onClick:()=>L("draft"),disabled:G,children:"Save draft"}),(0,b.jsx)("button",{className:"btn-ghost",type:"button",onClick:()=>L("review"),disabled:G,children:"Submit for review"}),(0,b.jsxs)("button",{className:"btn-primary",type:"button",onClick:()=>L("pending"),disabled:G,children:[(0,b.jsx)(k.Send,{className:"h-3.5 w-3.5"})," Schedule Post"]})]}),I?(0,b.jsx)("p",{className:"text-sm text-[var(--muted)]",children:I}):null]}),(0,b.jsxs)("aside",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,b.jsx)("div",{className:"phone-outer",children:(0,b.jsxs)("div",{className:"phone-frame",children:[(0,b.jsx)("div",{className:"phone-notch"}),(0,b.jsxs)("div",{className:"phone-screen",children:[(0,b.jsx)("div",{className:"phone-safe-top"}),"Instagram"===w&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"phone-ig-header",children:[(0,b.jsx)("div",{className:"phone-ig-avatar"}),(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"#fff"},children:u.name}),(0,b.jsx)("div",{style:{fontSize:9,color:"rgba(255,255,255,0.5)"},children:"Sponsored"})]}),(0,b.jsx)(j,{style:{width:14,color:"rgba(255,255,255,0.5)"}})]}),(0,b.jsx)("div",{className:"phone-ig-media",children:v[0]?.thumbnailUrl?(0,b.jsx)("img",{src:v[0].thumbnailUrl,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,b.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(h,{style:{width:28,color:"rgba(255,255,255,0.2)"}})})}),(0,b.jsxs)("div",{className:"phone-ig-actions",children:[(0,b.jsx)(g,{style:{width:18,color:"#fff"}}),(0,b.jsx)(i,{style:{width:18,color:"#fff"}}),(0,b.jsx)(l,{style:{width:18,color:"#fff"}})]}),(0,b.jsxs)("div",{style:{padding:"4px 10px 8px",fontSize:10,color:"#fff",lineHeight:1.4},children:[(0,b.jsx)("strong",{children:u.name})," ",y||(0,b.jsx)("span",{style:{opacity:.4},children:"Your caption will appear here…"})]})]}),"Instagram"!==w&&(0,b.jsxs)("div",{className:"phone-content-area",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8},children:[(0,b.jsxs)("div",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",textAlign:"center"},children:[w," preview"]}),(0,b.jsx)("div",{style:{fontSize:9,color:"rgba(255,255,255,0.3)",textAlign:"center"},children:y||"Caption preview"})]}),(0,b.jsx)("div",{className:"phone-safe-bottom"}),(0,b.jsx)("div",{className:"phone-home-bar"})]})]})}),(0,b.jsxs)("div",{className:"panel",style:{fontSize:"0.8rem"},children:[(0,b.jsx)("p",{className:"kicker",style:{position:"relative",zIndex:1},children:"AI Assist"}),(0,b.jsxs)("p",{style:{color:"var(--muted)",position:"relative",zIndex:1},children:["Generate a caption using ",u.name,"'s brand voice and guidelines."]}),(0,b.jsxs)("button",{className:"btn-ghost btn-sm",type:"button",style:{position:"relative",zIndex:1},children:[(0,b.jsx)(m.Sparkles,{className:"h-3.5 w-3.5"})," Generate caption"]})]})]})]})]}):(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("div",{className:"empty-state-icon",children:(0,b.jsx)(n.WandSparkles,{className:"h-6 w-6"})}),(0,b.jsx)("h3",{children:"No company selected"}),(0,b.jsx)(c.default,{className:"btn-primary",href:"/select-company",children:"Choose company"})]})}a.s(["default",()=>u],65557)}];

//# sourceMappingURL=_e592d480._.js.map