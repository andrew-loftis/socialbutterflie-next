module.exports=[51538,a=>{"use strict";var b=a.i(87924);function c({title:a,subtitle:c,actions:d}){return(0,b.jsxs)("header",{className:"page-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:a}),(0,b.jsx)("p",{children:c})]}),d?(0,b.jsx)("div",{className:"page-actions",children:d}):null]})}a.s(["PageHeader",()=>c])},33441,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},41267,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(30485);var e=a.i(31052);a.i(69387);var f=a.i(60574);a.i(60121);var g=a.i(5420),h=a.i(51538),i=a.i(89195),j=a.i(8876),k=a.i(70106);let l=(0,k.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var m=a.i(46842),n=a.i(92258);let o=(0,k.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var p=a.i(33441),q=a.i(33508);function r(){let{user:a,logout:k}=(0,i.useAuth)(),r=(0,d.useRouter)(),s=(a?.displayName??a?.email??"?").split(/[\s@]/).filter(Boolean).slice(0,2).map(a=>a[0].toUpperCase()).join(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(a?.displayName??""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(a?.photoURL??""),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(!1);async function N(){if(j.firebaseAuth?.currentUser){I(!0),K(null);try{let a=D;if(F){if(!j.firebaseStorage)throw Error("Firebase Storage is not configured.");let b=F.name.includes(".")?F.name.split(".").pop():"jpg",c=(0,g.ref)(j.firebaseStorage,`users/${j.firebaseAuth.currentUser.uid}/profile/avatar.${b}`);await (0,g.uploadBytes)(c,F,{contentType:F.type}),a=await (0,g.getDownloadURL)(c),E(a)}if(await (0,e.updateProfile)(j.firebaseAuth.currentUser,{displayName:x.trim(),photoURL:a||null}),j.firestore){let b=(0,f.doc)(j.firestore,"users",j.firebaseAuth.currentUser.uid,"profile","public");await (0,f.setDoc)(b,{displayName:x.trim(),title:z.trim(),bio:B.trim(),photoURL:a||"",updatedAt:new Date().toISOString()},{merge:!0})}G(null),u(!1),M(!0),setTimeout(()=>M(!1),3e3)}catch(a){K(a instanceof Error?a.message:"Failed to update profile.")}finally{I(!1)}}}async function O(){await k(),r.push("/")}return(0,c.useEffect)(()=>{y(a?.displayName??""),E(a?.photoURL??"")},[a?.displayName,a?.photoURL]),(0,c.useEffect)(()=>{(async function(){if(a?.uid&&j.firestore){w(!0);try{let b=(0,f.doc)(j.firestore,"users",a.uid,"profile","public"),c=await (0,f.getDoc)(b);if(c.exists()){let b=c.data();A(b.title||""),C(b.bio||""),b.displayName&&!a.displayName&&y(b.displayName),b.photoURL&&!a.photoURL&&E(b.photoURL)}}catch(a){K(a instanceof Error?a.message:"Failed to load profile.")}finally{w(!1)}}})().catch(()=>void 0)},[a?.uid,a?.displayName,a?.photoURL]),(0,b.jsxs)("div",{className:"page",children:[(0,b.jsx)(h.PageHeader,{title:"My Profile",subtitle:"Manage your account details and authentication."}),(0,b.jsxs)("section",{className:"panel",children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px"},children:[(0,b.jsx)("div",{style:{width:64,height:64,borderRadius:"50%",background:"var(--accent)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.4rem",fontWeight:700,flexShrink:0,overflow:"hidden"},children:D?(0,b.jsx)("img",{src:D,alt:"Profile avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):s}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{style:{fontWeight:600,fontSize:"1rem",margin:0},children:x||a?.displayName||"No display name"}),(0,b.jsx)("p",{style:{color:"var(--fg-muted)",margin:"2px 0 0",fontSize:"0.85rem"},children:a?.email}),z?(0,b.jsx)("p",{style:{color:"var(--fg-muted)",margin:"2px 0 0",fontSize:"0.8rem"},children:z}):null]})]}),(0,b.jsxs)("div",{className:"form-field",children:[(0,b.jsxs)("label",{className:"form-label",children:[(0,b.jsx)(m.User,{className:"h-4 w-4",style:{display:"inline",marginRight:6,verticalAlign:"middle"}}),"Account details"]}),t?(0,b.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,b.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,b.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Display Name"}),(0,b.jsx)("input",{className:"input",value:x,onChange:a=>y(a.target.value),autoFocus:!0,disabled:H})]}),(0,b.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,b.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Title"}),(0,b.jsx)("input",{className:"input",value:z,onChange:a=>A(a.target.value),disabled:H,placeholder:"Creative Director"})]}),(0,b.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,b.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Bio"}),(0,b.jsx)("textarea",{className:"input",value:B,onChange:a=>C(a.target.value),disabled:H,placeholder:"Tell your team and clients about your role and expertise.",rows:4,style:{resize:"vertical"}})]}),(0,b.jsxs)("label",{style:{display:"grid",gap:4},children:[(0,b.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--fg-muted)"},children:"Profile image"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>G(a.target.files?.[0]||null),disabled:H})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,b.jsxs)("button",{className:"btn-primary",onClick:N,disabled:H,type:"button",children:[(0,b.jsx)(p.Check,{className:"h-4 w-4"}),"Save profile"]}),(0,b.jsxs)("button",{className:"btn-ghost",onClick:()=>{u(!1),y(a?.displayName??""),E(a?.photoURL??""),G(null)},type:"button",children:[(0,b.jsx)(q.X,{className:"h-4 w-4"}),"Cancel"]})]})]}):(0,b.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,b.jsx)("span",{className:"input",style:{flex:1,color:x?"inherit":"var(--fg-muted)"},children:x||"Not set"}),(0,b.jsxs)("button",{className:"btn-ghost",onClick:()=>u(!0),type:"button",children:[(0,b.jsx)(o,{className:"h-4 w-4"}),"Edit"]})]}),J?(0,b.jsx)("p",{style:{color:"var(--error, #e74c3c)",marginTop:6,fontSize:"0.82rem"},children:J}):null,v?(0,b.jsx)("p",{style:{color:"var(--fg-muted)",marginTop:6,fontSize:"0.82rem"},children:"Loading profile..."}):null,L?(0,b.jsx)("p",{style:{color:"var(--success, #27ae60)",marginTop:6,fontSize:"0.82rem"},children:"Profile updated."}):null,!t&&B?(0,b.jsx)("p",{style:{color:"var(--fg-muted)",marginTop:10,fontSize:"0.84rem",whiteSpace:"pre-wrap"},children:B}):null]}),(0,b.jsxs)("div",{className:"form-field",style:{marginTop:16},children:[(0,b.jsxs)("label",{className:"form-label",children:[(0,b.jsx)(n.Mail,{className:"h-4 w-4",style:{display:"inline",marginRight:6,verticalAlign:"middle"}}),"Email Address"]}),(0,b.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,b.jsx)("span",{className:"input",style:{flex:1,color:"var(--fg-muted)",userSelect:"all"},children:a?.email??"-"}),(0,b.jsx)("span",{className:"badge",children:"Read-only"})]}),(0,b.jsx)("p",{style:{fontSize:"0.78rem",color:"var(--fg-muted)",marginTop:4},children:"Email is set by your authentication provider and cannot be changed here."})]})]}),(0,b.jsxs)("section",{className:"panel",children:[(0,b.jsx)("h3",{children:"Authentication"}),(0,b.jsxs)("p",{children:["You are signed in via ",(0,b.jsx)("strong",{children:a?.providerData?.[0]?.providerId??"email/password"}),"."]}),(0,b.jsx)("div",{className:"button-row",style:{marginTop:12},children:(0,b.jsxs)("button",{className:"btn-ghost",type:"button",onClick:O,style:{color:"var(--error, #e74c3c)"},children:[(0,b.jsx)(l,{className:"h-4 w-4"}),"Sign out"]})})]})]})}a.s(["default",()=>r],41267)}];

//# sourceMappingURL=_1d510207._.js.map