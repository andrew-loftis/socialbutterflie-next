{"version":3,"sources":["../../../../src/components/ui/page-header.tsx","../../../../src/lib/hooks/use-active-company.ts","../../../../src/lib/hooks/use-company-posts.ts","../../../../src/app/%28app%29/studio/library/page.tsx"],"sourcesContent":["export function PageHeader({ title, subtitle, actions }: { title: string; subtitle: string; actions?: React.ReactNode }) {\n  return (\n    <header className=\"page-header\">\n      <div>\n        <h1>{title}</h1>\n        <p>{subtitle}</p>\n      </div>\n      {actions ? <div className=\"page-actions\">{actions}</div> : null}\n    </header>\n  );\n}\r\n\r\n","\"use client\";\n\nimport { useMemo } from 'react';\nimport { useAppState } from '@/components/shell/app-state';\n\nexport function useActiveCompany() {\n  const { appContext, companies, setActiveCompany, markCompanyGateSeen } = useAppState();\n\n  const activeCompany = useMemo(\n    () => companies.find((company) => company.id === appContext.activeCompanyId) || null,\n    [appContext.activeCompanyId, companies]\n  );\n\n  return {\n    activeCompany,\n    activeCompanyId: appContext.activeCompanyId,\n    companies,\n    setActiveCompany: (companyId: string | null) => {\n      setActiveCompany(companyId);\n      markCompanyGateSeen(Boolean(companyId));\n    },\n  };\n}\n\n","\"use client\";\n\nimport { collection, onSnapshot, orderBy, query } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport { useAppState } from '@/components/shell/app-state';\nimport { firestore } from '@/lib/firebase/client';\n\nexport type CompanyPost = {\n  id: string;\n  status: 'draft' | 'in_review' | 'scheduled' | 'published' | 'failed';\n  caption: string;\n  scheduledFor?: string;\n  platform?: string;\n};\n\nconst memoryPosts: Record<string, CompanyPost[]> = {};\n\nexport function useCompanyPosts() {\n  const { appContext } = useAppState();\n  const activeCompanyId = appContext.activeCompanyId;\n  const key = `${appContext.workspaceId}:${activeCompanyId || 'none'}`;\n  const [posts, setPosts] = useState<CompanyPost[]>([]);\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    if (!activeCompanyId || !firestore) return;\n    const postsRef = collection(\n      firestore,\n      'workspaces',\n      appContext.workspaceId,\n      'companies',\n      activeCompanyId,\n      'posts'\n    );\n    const q = query(postsRef, orderBy('scheduledFor', 'asc'));\n    return onSnapshot(q, (snap) => {\n      setPosts(\n        snap.docs.map((entry) => ({\n          id: entry.id,\n          ...(entry.data() as Omit<CompanyPost, 'id'>),\n        }))\n      );\n      setLoaded(true);\n    });\n  }, [activeCompanyId, appContext.workspaceId]);\n\n  if (!activeCompanyId) {\n    return { posts: [], loading: false };\n  }\n\n  if (!firestore) {\n    return { posts: memoryPosts[key] || [], loading: false };\n  }\n\n  return { posts, loading: !loaded };\n}\n","\"use client\";\n\nimport Link from 'next/link';\nimport { PageHeader } from '@/components/ui/page-header';\nimport { useActiveCompany } from '@/lib/hooks/use-active-company';\nimport { useCompanyPosts } from '@/lib/hooks/use-company-posts';\n\nexport default function StudioLibraryPage() {\n  const { activeCompany } = useActiveCompany();\n  const { posts } = useCompanyPosts();\n\n  return (\n    <div className=\"space-y-3\">\n      <PageHeader title=\"Studio Library\" subtitle=\"Generated outputs and queued jobs for the active company.\" />\n      {!activeCompany ? (\n        <section className=\"panel\">\n          <h3>No active company selected</h3>\n          <Link className=\"btn-primary\" href=\"/select-company\">Choose company</Link>\n        </section>\n      ) : (\n        <section className=\"panel\">\n          {posts.length ? (\n            <table className=\"table\">\n              <thead>\n                <tr><th>Record</th><th>Status</th><th /></tr>\n              </thead>\n              <tbody>\n                {posts.map((post) => (\n                  <tr key={post.id}>\n                    <td>{post.id}</td>\n                    <td><span className=\"badge\">{post.status}</span></td>\n                    <td><Link className=\"inline-link\" href={`/studio/jobs/${post.id}`}>Open</Link></td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          ) : (\n            <div className=\"empty-state\">\n              <p>No generation jobs yet for {activeCompany.name}.</p>\n              <Link className=\"btn-primary\" href=\"/studio\">Create first generation</Link>\n            </div>\n          )}\n        </section>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}