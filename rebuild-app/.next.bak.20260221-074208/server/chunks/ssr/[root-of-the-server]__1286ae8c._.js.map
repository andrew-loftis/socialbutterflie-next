{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../src/components/shell/app-state.tsx","../../../../src/lib/firebase/errors.ts","../../../../src/lib/firebase/company-store.ts","../../../../src/lib/firebase/member-store.ts","../../../../src/lib/firebase/workspace-access-store.ts","../../../../src/components/company/company-context-provider.tsx","../../../../src/lib/theme/company-theme.ts","../../../../src/components/shell/providers.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\n\nimport { createContext, useContext, useMemo, useState, type Dispatch, type SetStateAction } from 'react';\nimport { useAuth } from '@/lib/firebase/auth-provider';\nimport type { AppContext, CompanyMember, CompanyProfile, InspectorEntityPayload } from '@/types/interfaces';\n\nconst SESSION_ACTIVE_COMPANY_KEY = 'sb_active_company_id';\nconst SESSION_GATE_SEEN_KEY = 'sb_company_gate_seen';\n\ntype AppStateValue = {\n  appContext: AppContext;\n  setAppContext: Dispatch<SetStateAction<AppContext>>;\n  companies: CompanyProfile[];\n  setCompanies: Dispatch<SetStateAction<CompanyProfile[]>>;\n  membersByCompany: Record<string, CompanyMember[]>;\n  setMembersByCompany: Dispatch<SetStateAction<Record<string, CompanyMember[]>>>;\n  setActiveCompany: (companyId: string | null) => void;\n  markCompanyGateSeen: (value: boolean) => void;\n  inspector: InspectorEntityPayload | null;\n  setInspector: (payload: InspectorEntityPayload | null) => void;\n};\n\nconst defaultContext: AppContext = {\n  workspaceId: 'workspace-primary',\n  userId: 'anonymous',\n  role: 'viewer',\n  activeCompanyId: null,\n  companyGateSeenInSession: false,\n};\n\nfunction readInitialContext(): AppContext {\n  if (typeof window === 'undefined') return defaultContext;\n  return {\n    ...defaultContext,\n    activeCompanyId: window.sessionStorage.getItem(SESSION_ACTIVE_COMPANY_KEY),\n    companyGateSeenInSession: window.sessionStorage.getItem(SESSION_GATE_SEEN_KEY) === '1',\n  };\n}\n\nconst AppStateContext = createContext<AppStateValue | null>(null);\n\nexport function AppStateProvider({ children }: { children: React.ReactNode }) {\n  const { user } = useAuth();\n  const [baseContext, setBaseContext] = useState<AppContext>(readInitialContext);\n  const [companies, setCompanies] = useState<CompanyProfile[]>([]);\n  const [membersByCompany, setMembersByCompany] = useState<Record<string, CompanyMember[]>>({});\n  const [inspector, setInspector] = useState<InspectorEntityPayload | null>(null);\n\n  const appContext = useMemo<AppContext>(() => {\n    return {\n      ...baseContext,\n      userId: user?.uid || defaultContext.userId,\n      role: user ? 'editor' : 'viewer',\n    };\n  }, [baseContext, user]);\n\n  const value = useMemo<AppStateValue>(\n    () => ({\n      appContext,\n      setAppContext: setBaseContext,\n      companies,\n      setCompanies,\n      membersByCompany,\n      setMembersByCompany,\n      setActiveCompany: (companyId: string | null) => {\n        setBaseContext((prev) => ({ ...prev, activeCompanyId: companyId }));\n        if (typeof window !== 'undefined') {\n          if (companyId) window.sessionStorage.setItem(SESSION_ACTIVE_COMPANY_KEY, companyId);\n          else window.sessionStorage.removeItem(SESSION_ACTIVE_COMPANY_KEY);\n        }\n      },\n      markCompanyGateSeen: (seen: boolean) => {\n        setBaseContext((prev) => ({ ...prev, companyGateSeenInSession: seen }));\n        if (typeof window !== 'undefined') {\n          window.sessionStorage.setItem(SESSION_GATE_SEEN_KEY, seen ? '1' : '0');\n        }\n      },\n      inspector,\n      setInspector,\n    }),\n    [appContext, companies, membersByCompany, inspector]\n  );\n\n  return <AppStateContext.Provider value={value}>{children}</AppStateContext.Provider>;\n}\n\nexport function useAppState() {\n  const ctx = useContext(AppStateContext);\n  if (!ctx) throw new Error('useAppState must be used inside AppStateProvider');\n  return ctx;\n}\n\n","import { FirebaseError } from 'firebase/app';\n\ntype FirebaseArea = 'auth' | 'firestore' | 'storage';\n\nfunction normalizeMessage(area: FirebaseArea, code: string) {\n  if (area === 'auth') {\n    switch (code) {\n      case 'auth/invalid-credential':\n      case 'auth/wrong-password':\n      case 'auth/user-not-found':\n        return 'Invalid email or password.';\n      case 'auth/email-already-in-use':\n        return 'That email is already registered. Sign in instead.';\n      case 'auth/invalid-email':\n        return 'Enter a valid email address.';\n      case 'auth/weak-password':\n        return 'Password must be at least 6 characters.';\n      case 'auth/operation-not-allowed':\n        return 'Enable this sign-in provider in Firebase Auth -> Sign-in method.';\n      case 'auth/account-exists-with-different-credential':\n        return 'An account already exists with a different sign-in provider for this email.';\n      case 'auth/popup-blocked':\n        return 'Popup was blocked by the browser. Allow popups and try again.';\n      case 'auth/popup-closed-by-user':\n        return 'Sign-in popup was closed before finishing.';\n      case 'auth/unauthorized-domain':\n        return 'This domain is not authorized in Firebase Auth settings.';\n      case 'auth/invalid-provider-id':\n        return 'This auth provider is not configured correctly in Firebase.';\n      case 'auth/network-request-failed':\n        return 'Network error contacting Firebase Auth.';\n      default:\n        return 'Authentication failed. Check Firebase Auth provider setup.';\n    }\n  }\n\n  if (area === 'firestore') {\n    switch (code) {\n      case 'permission-denied':\n        return 'Firestore permission denied. Ensure signed-in users can read/write workspace docs in Firestore rules.';\n      case 'unavailable':\n        return 'Firestore is temporarily unavailable.';\n      case 'failed-precondition':\n        return 'Firestore operation failed precondition. Verify indexes/rules are deployed.';\n      default:\n        return 'Firestore request failed.';\n    }\n  }\n\n  switch (code) {\n    case 'storage/unauthorized':\n      return 'Storage permission denied. Update Firebase Storage rules for authenticated users.';\n    case 'storage/object-not-found':\n      return 'The requested storage object was not found.';\n    default:\n      return 'Firebase Storage request failed.';\n  }\n}\n\nexport function mapFirebaseError(error: unknown, area: FirebaseArea) {\n  if (error instanceof FirebaseError) {\n    return normalizeMessage(area, error.code);\n  }\n  if (error instanceof Error && error.message) {\n    return error.message;\n  }\n  return 'Unexpected Firebase error.';\n}\n","import {\n  collection,\n  collectionGroup,\n  doc,\n  getDoc,\n  getDocs,\n  onSnapshot,\n  query,\n  setDoc,\n  updateDoc,\n  where,\n  type Unsubscribe,\n} from 'firebase/firestore';\nimport { getDownloadURL, ref, uploadBytes } from 'firebase/storage';\nimport { firestore, firebaseStorage } from '@/lib/firebase/client';\nimport { mapFirebaseError } from '@/lib/firebase/errors';\nimport type { CompanyMember, CompanyProfile } from '@/types/interfaces';\n\ntype CreateCompanyInput = {\n  workspaceId: string;\n  userId: string;\n  userEmail?: string;\n  name: string;\n  branding: {\n    primary: string;\n    secondary?: string;\n    accent?: string;\n  };\n  coverFile?: File | null;\n};\n\nconst memoryCompanies: CompanyProfile[] = [];\nconst memoryListeners = new Set<(value: CompanyProfile[]) => void>();\nconst memoryPreferences = new Map<string, { lastActiveWorkspaceId?: string; lastActiveCompanyId?: string }>();\n\nfunction notifyMemoryCompanies() {\n  const sorted = [...memoryCompanies].sort((a, b) => a.name.localeCompare(b.name));\n  for (const listener of memoryListeners) listener(sorted);\n}\n\nfunction slugify(value: string) {\n  return value.toLowerCase().trim().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');\n}\n\nexport function createEmptyCompanyProfile(input: CreateCompanyInput): CompanyProfile {\n  const now = new Date().toISOString();\n  return {\n    id: `company-${crypto.randomUUID().slice(0, 8)}`,\n    workspaceId: input.workspaceId,\n    name: input.name.trim(),\n    slug: slugify(input.name),\n    status: 'draft',\n    completionScore: 0,\n    coverAssetUrl: '',\n    branding: {\n      primary: input.branding.primary,\n      secondary: input.branding.secondary || '',\n      accent: input.branding.accent || '',\n    },\n    memberCount: 0,\n    sections: {\n      identity: { legalName: '', tagline: '', mission: '', mascot: '', primaryColors: [input.branding.primary] },\n      voice: { tone: '', dos: [], donts: [], ctaStyle: '', examples: [] },\n      visual: { styleKeywords: [], typography: '', layoutDirection: '', moodReferences: [] },\n      audience: { primaryPersona: '', geographies: [], keyObjections: [], desiredPerception: '' },\n      content: { pillars: [], formats: [], cadence: '', goals: [], prohibitedTopics: [] },\n    },\n    promptPacks: {\n      identity: [],\n      voice: [],\n      visual: [],\n      audience: [],\n      content: [],\n    },\n    aiContextCompiled: '',\n    assets: [],\n    createdBy: input.userId,\n    updatedBy: input.userId,\n    createdAt: now,\n    updatedAt: now,\n  };\n}\n\nexport async function uploadCompanyCover(workspaceId: string, companyId: string, file: File) {\n  if (!firebaseStorage) return '';\n  const path = `workspaces/${workspaceId}/companies/${companyId}/cover/${Date.now()}-${file.name}`;\n  const coverRef = ref(firebaseStorage, path);\n  try {\n    await uploadBytes(coverRef, file);\n    return getDownloadURL(coverRef);\n  } catch (error) {\n    throw new Error(mapFirebaseError(error, 'storage'));\n  }\n}\n\nexport async function createCompany(input: CreateCompanyInput): Promise<CompanyProfile> {\n  const company = createEmptyCompanyProfile(input);\n  if (input.coverFile) {\n    company.coverAssetUrl = await uploadCompanyCover(input.workspaceId, company.id, input.coverFile);\n  }\n\n  if (!firestore) {\n    memoryCompanies.push(company);\n    notifyMemoryCompanies();\n    return company;\n  }\n\n  try {\n    const companiesRef = collection(firestore, 'workspaces', input.workspaceId, 'companies');\n    await setDoc(doc(companiesRef, company.id), company);\n\n    const now = new Date().toISOString();\n    const member: CompanyMember = {\n      id: input.userId,\n      workspaceId: input.workspaceId,\n      companyId: company.id,\n      email: (input.userEmail || `${input.userId}@local.test`).trim().toLowerCase(),\n      uid: input.userId,\n      name: 'Workspace Owner',\n      role: 'admin',\n      status: 'active',\n      invitedBy: input.userId,\n      invitedAt: now,\n      joinedAt: now,\n    };\n\n    // Critical for authorization + listing: company is only visible to users who have a uid member doc.\n    await setDoc(doc(firestore, 'workspaces', input.workspaceId, 'companies', company.id, 'members', input.userId), member, {\n      merge: true,\n    });\n    return company;\n  } catch (error) {\n    throw new Error(mapFirebaseError(error, 'firestore'));\n  }\n}\n\nexport async function bootstrapCompanyCreatorMemberships(input: {\n  workspaceId: string;\n  uid: string;\n  email?: string;\n}) {\n  const fs = firestore;\n  if (!fs) return;\n\n  try {\n    const companiesRef = collection(fs, 'workspaces', input.workspaceId, 'companies');\n    const snap = await getDocs(query(companiesRef, where('createdBy', '==', input.uid)));\n    if (!snap.docs.length) return;\n\n    const now = new Date().toISOString();\n    const email = (input.email || `${input.uid}@local.test`).trim().toLowerCase();\n\n    for (const docSnap of snap.docs) {\n      const company = docSnap.data() as CompanyProfile;\n      const memberRef = doc(fs, 'workspaces', input.workspaceId, 'companies', company.id, 'members', input.uid);\n      const memberSnap = await getDoc(memberRef);\n      if (memberSnap.exists()) continue;\n\n      const member: CompanyMember = {\n        id: input.uid,\n        workspaceId: input.workspaceId,\n        companyId: company.id,\n        email,\n        uid: input.uid,\n        name: 'Workspace Owner',\n        role: 'admin',\n        status: 'active',\n        invitedBy: input.uid,\n        invitedAt: now,\n        joinedAt: now,\n      };\n\n      await setDoc(memberRef, member, { merge: true });\n    }\n  } catch {\n    // Best-effort; subscription will still work for companies that already have memberships.\n  }\n}\n\nexport function subscribeCompanies(\n  workspaceId: string,\n  userId: string,\n  callback: (companies: CompanyProfile[]) => void,\n  onError?: (message: string) => void\n): Unsubscribe {\n  const fs = firestore;\n  if (!fs) {\n    memoryListeners.add(callback);\n    callback([...memoryCompanies].sort((a, b) => a.name.localeCompare(b.name)));\n    return () => {\n      memoryListeners.delete(callback);\n    };\n  }\n\n  if (!userId) {\n    callback([]);\n    return () => undefined;\n  }\n\n  const companiesById = new Map<string, CompanyProfile>();\n  const unsubByCompanyId = new Map<string, Unsubscribe>();\n\n  function emit() {\n    callback([...companiesById.values()].sort((a, b) => a.name.localeCompare(b.name)));\n  }\n\n  // List companies through the user's membership docs, not by reading the entire companies collection\n  // (which breaks as soon as there are companies the user is not allowed to read).\n  const membershipQuery = query(\n    collectionGroup(fs, 'members'),\n    where('uid', '==', userId),\n    where('workspaceId', '==', workspaceId),\n    where('status', '==', 'active')\n  );\n\n  const unsubscribeMembership = onSnapshot(\n    membershipQuery,\n    (snapshot) => {\n      const desired = new Set<string>();\n      for (const docSnap of snapshot.docs) {\n        const data = docSnap.data() as Partial<CompanyMember>;\n        if (!data.companyId) continue;\n        desired.add(String(data.companyId));\n      }\n\n      for (const [companyId, unsubscribe] of unsubByCompanyId.entries()) {\n        if (desired.has(companyId)) continue;\n        unsubscribe();\n        unsubByCompanyId.delete(companyId);\n        companiesById.delete(companyId);\n      }\n\n      for (const companyId of desired) {\n        if (unsubByCompanyId.has(companyId)) continue;\n        const companyRef = doc(fs, 'workspaces', workspaceId, 'companies', companyId);\n        const unsub = onSnapshot(\n          companyRef,\n          (companySnap) => {\n            if (!companySnap.exists()) {\n              companiesById.delete(companyId);\n              emit();\n              return;\n            }\n            companiesById.set(companyId, companySnap.data() as CompanyProfile);\n            emit();\n          },\n          (error) => onError?.(mapFirebaseError(error, 'firestore'))\n        );\n        unsubByCompanyId.set(companyId, unsub);\n      }\n\n      emit();\n    },\n    (error) => {\n      onError?.(mapFirebaseError(error, 'firestore'));\n    }\n  );\n\n  return () => {\n    unsubscribeMembership();\n    for (const unsub of unsubByCompanyId.values()) unsub();\n    unsubByCompanyId.clear();\n    companiesById.clear();\n  };\n}\n\nexport async function updateCompany(\n  workspaceId: string,\n  companyId: string,\n  patch: Partial<CompanyProfile>\n): Promise<void> {\n  if (!firestore) {\n    const index = memoryCompanies.findIndex((company) => company.id === companyId);\n    if (index >= 0) {\n      memoryCompanies[index] = {\n        ...memoryCompanies[index],\n        ...patch,\n        updatedAt: new Date().toISOString(),\n      };\n      notifyMemoryCompanies();\n    }\n    return;\n  }\n\n  try {\n    const companyRef = doc(firestore, 'workspaces', workspaceId, 'companies', companyId);\n    await updateDoc(companyRef, {\n      ...patch,\n      updatedAt: new Date().toISOString(),\n    });\n  } catch (error) {\n    throw new Error(mapFirebaseError(error, 'firestore'));\n  }\n}\n\nexport async function getCompanyById(\n  workspaceId: string,\n  companyId: string\n): Promise<CompanyProfile | null> {\n  if (!firestore) {\n    return memoryCompanies.find((company) => company.id === companyId) || null;\n  }\n\n  try {\n    const companyRef = doc(firestore, 'workspaces', workspaceId, 'companies', companyId);\n    const snapshot = await getDoc(companyRef);\n    if (!snapshot.exists()) return null;\n    return snapshot.data() as CompanyProfile;\n  } catch {\n    return null;\n  }\n}\n\nexport async function setUserCompanyPreference(\n  userId: string,\n  workspaceId: string,\n  companyId: string | null\n) {\n  if (!firestore) {\n    memoryPreferences.set(userId, {\n      lastActiveWorkspaceId: workspaceId,\n      lastActiveCompanyId: companyId || undefined,\n    });\n    return;\n  }\n\n  try {\n    const prefRef = doc(firestore, 'users', userId, 'preferences', 'app');\n    await setDoc(\n      prefRef,\n      {\n        lastActiveWorkspaceId: workspaceId,\n        lastActiveCompanyId: companyId,\n        updatedAt: new Date().toISOString(),\n      },\n      { merge: true }\n    );\n  } catch {\n    return;\n  }\n}\n\nexport async function getUserCompanyPreference(userId: string) {\n  if (!firestore) {\n    return (\n      memoryPreferences.get(userId) || {\n        lastActiveWorkspaceId: '',\n        lastActiveCompanyId: '',\n      }\n    );\n  }\n\n  try {\n    const prefRef = doc(firestore, 'users', userId, 'preferences', 'app');\n    const snapshot = await getDoc(prefRef);\n    if (!snapshot.exists()) {\n      return {\n        lastActiveWorkspaceId: '',\n        lastActiveCompanyId: '',\n      };\n    }\n    return snapshot.data() as { lastActiveWorkspaceId?: string; lastActiveCompanyId?: string };\n  } catch {\n    return {\n      lastActiveWorkspaceId: '',\n      lastActiveCompanyId: '',\n    };\n  }\n}\n\nexport async function incrementCompanyMemberCount(workspaceId: string, companyId: string, delta: number) {\n  const company = await getCompanyById(workspaceId, companyId);\n  if (!company) return;\n  const next = Math.max(0, (company.memberCount || 0) + delta);\n  await updateCompany(workspaceId, companyId, { memberCount: next });\n}\n","import { collection, doc, getDoc, onSnapshot, setDoc, updateDoc, type Unsubscribe } from 'firebase/firestore';\nimport { firestore } from '@/lib/firebase/client';\nimport { incrementCompanyMemberCount } from '@/lib/firebase/company-store';\nimport { mapFirebaseError } from '@/lib/firebase/errors';\nimport type { CompanyMember, Role } from '@/types/interfaces';\n\nconst memoryMembers: Record<string, CompanyMember[]> = {};\nconst memoryListeners = new Map<string, Set<(members: CompanyMember[]) => void>>();\n\nfunction companyKey(workspaceId: string, companyId: string) {\n  return `${workspaceId}:${companyId}`;\n}\n\nfunction notify(workspaceId: string, companyId: string) {\n  const key = companyKey(workspaceId, companyId);\n  const listeners = memoryListeners.get(key);\n  if (!listeners) return;\n  const value = memoryMembers[key] || [];\n  for (const listener of listeners) listener(value);\n}\n\nexport function subscribeCompanyMembers(\n  workspaceId: string,\n  companyId: string,\n  callback: (members: CompanyMember[]) => void,\n  onError?: (message: string) => void\n): Unsubscribe {\n  if (!firestore) {\n    const key = companyKey(workspaceId, companyId);\n    const listeners = memoryListeners.get(key) || new Set();\n    listeners.add(callback);\n    memoryListeners.set(key, listeners);\n    callback(memoryMembers[key] || []);\n    return () => {\n      const next = memoryListeners.get(key);\n      if (!next) return;\n      next.delete(callback);\n    };\n  }\n\n  const membersRef = collection(firestore, 'workspaces', workspaceId, 'companies', companyId, 'members');\n  return onSnapshot(\n    membersRef,\n    (snapshot) => {\n      const raw = snapshot.docs.map((entry) => entry.data() as CompanyMember);\n      // When invites create pending members (email-* ids) and acceptance creates an active uid member,\n      // dedupe by email and prefer the active/uid entry.\n      const byEmail = new Map<string, CompanyMember>();\n      for (const member of raw) {\n        const key = (member.email || '').trim().toLowerCase();\n        if (!key) continue;\n        const existing = byEmail.get(key);\n        if (!existing) {\n          byEmail.set(key, member);\n          continue;\n        }\n        const existingScore = existing.status === 'active' ? 2 : existing.status === 'pending' ? 1 : 0;\n        const nextScore = member.status === 'active' ? 2 : member.status === 'pending' ? 1 : 0;\n        if (nextScore > existingScore) {\n          byEmail.set(key, member);\n          continue;\n        }\n        if (nextScore === existingScore && member.uid && !existing.uid) {\n          byEmail.set(key, member);\n        }\n      }\n\n      const members = Array.from(byEmail.values()).sort((a, b) => a.email.localeCompare(b.email));\n      callback(members);\n    },\n    (error) => {\n      onError?.(mapFirebaseError(error, 'firestore'));\n    }\n  );\n}\n\nexport async function addPendingMember(\n  workspaceId: string,\n  companyId: string,\n  input: { email: string; role: Role; invitedBy: string }\n) {\n  const now = new Date().toISOString();\n  const normalizedEmail = input.email.trim().toLowerCase();\n  const memberId = `email-${normalizedEmail.replace(/[^a-z0-9]+/g, '-')}`;\n  const member: CompanyMember = {\n    id: memberId,\n    workspaceId,\n    companyId,\n    email: normalizedEmail,\n    role: input.role,\n    status: 'pending',\n    invitedBy: input.invitedBy,\n    invitedAt: now,\n  };\n\n  if (!firestore) {\n    const key = companyKey(workspaceId, companyId);\n    const existing = memoryMembers[key] || [];\n    const hasEmail = existing.some((entry) => entry.email === member.email);\n    if (!hasEmail) {\n      memoryMembers[key] = [member, ...existing];\n      await incrementCompanyMemberCount(workspaceId, companyId, 1);\n      notify(workspaceId, companyId);\n    }\n    return member;\n  }\n\n  try {\n    const memberRef = doc(firestore, 'workspaces', workspaceId, 'companies', companyId, 'members', member.id);\n    const existing = await getDoc(memberRef);\n    await setDoc(memberRef, member, { merge: true });\n    if (!existing.exists()) {\n      await incrementCompanyMemberCount(workspaceId, companyId, 1);\n    }\n    return member;\n  } catch (error) {\n    throw new Error(mapFirebaseError(error, 'firestore'));\n  }\n}\n\nexport async function activateMemberByEmail(\n  workspaceId: string,\n  companyId: string,\n  email: string,\n  uid: string,\n  name?: string,\n  role: Role = 'viewer'\n) {\n  if (!firestore) {\n    const key = companyKey(workspaceId, companyId);\n    const existing = memoryMembers[key] || [];\n    const index = existing.findIndex((entry) => entry.email === email.toLowerCase());\n    if (index >= 0) {\n      existing[index] = {\n        ...existing[index],\n        status: 'active',\n        role,\n        uid,\n        name: name || existing[index].name || '',\n        joinedAt: new Date().toISOString(),\n      };\n      notify(workspaceId, companyId);\n    }\n    return;\n  }\n\n  try {\n    // Use uid-based member doc for authorization + company listing.\n    const memberRef = doc(firestore, 'workspaces', workspaceId, 'companies', companyId, 'members', uid);\n    await setDoc(\n      memberRef,\n      {\n        id: uid,\n        workspaceId,\n        companyId,\n        email: email.toLowerCase(),\n        uid,\n        name: name || '',\n        role,\n        status: 'active',\n        invitedBy: uid,\n        invitedAt: new Date().toISOString(),\n        joinedAt: new Date().toISOString(),\n      } satisfies CompanyMember,\n      { merge: true }\n    );\n  } catch (error) {\n    throw new Error(mapFirebaseError(error, 'firestore'));\n  }\n}\n\nexport async function updateMemberRole(\n  workspaceId: string,\n  companyId: string,\n  memberId: string,\n  role: Role\n) {\n  if (!firestore) {\n    const key = companyKey(workspaceId, companyId);\n    const members = memoryMembers[key] || [];\n    const index = members.findIndex((member) => member.id === memberId);\n    if (index >= 0) {\n      members[index] = { ...members[index], role };\n      notify(workspaceId, companyId);\n    }\n    return;\n  }\n\n  try {\n    const memberRef = doc(firestore, 'workspaces', workspaceId, 'companies', companyId, 'members', memberId);\n    await updateDoc(memberRef, { role });\n  } catch (error) {\n    throw new Error(mapFirebaseError(error, 'firestore'));\n  }\n}\n","import { doc, getDoc, setDoc } from 'firebase/firestore';\nimport { firestore } from '@/lib/firebase/client';\nimport type { Role } from '@/types/interfaces';\n\ntype WorkspaceAccessDoc = {\n  uid: string;\n  email: string;\n  workspaceRole: Role;\n  status: 'active' | 'revoked';\n  companyRoles: Record<string, Role>;\n  createdAt: string;\n  updatedAt: string;\n};\n\nconst memoryAccess = new Map<string, WorkspaceAccessDoc>();\n\nconst ROLE_WEIGHT: Record<Role, number> = {\n  client: 1,\n  viewer: 2,\n  editor: 3,\n  admin: 4,\n};\n\nfunction accessKey(workspaceId: string, uid: string) {\n  return `${workspaceId}:${uid}`;\n}\n\nfunction maxRole(a: Role, b: Role): Role {\n  return ROLE_WEIGHT[a] >= ROLE_WEIGHT[b] ? a : b;\n}\n\nexport async function upsertWorkspaceUserRole(input: {\n  workspaceId: string;\n  uid: string;\n  email: string;\n  companyId: string;\n  role: Role;\n  workspaceRoleHint?: Role;\n}) {\n  const now = new Date().toISOString();\n  const key = accessKey(input.workspaceId, input.uid);\n\n  if (!firestore) {\n    const current = memoryAccess.get(key);\n    const nextWorkspaceRole = current\n      ? maxRole(current.workspaceRole, input.workspaceRoleHint || input.role)\n      : (input.workspaceRoleHint || input.role);\n    memoryAccess.set(key, {\n      uid: input.uid,\n      email: input.email.trim().toLowerCase(),\n      workspaceRole: nextWorkspaceRole,\n      status: 'active',\n      companyRoles: {\n        ...(current?.companyRoles || {}),\n        [input.companyId]: input.role,\n      },\n      createdAt: current?.createdAt || now,\n      updatedAt: now,\n    });\n    return;\n  }\n\n  const accessRef = doc(firestore, 'workspaces', input.workspaceId, 'user_roles', input.uid);\n  const snapshot = await getDoc(accessRef);\n  const current = snapshot.exists() ? (snapshot.data() as WorkspaceAccessDoc) : null;\n\n  const nextWorkspaceRole = current\n    ? maxRole(current.workspaceRole, input.workspaceRoleHint || input.role)\n    : (input.workspaceRoleHint || input.role);\n\n  await setDoc(\n    accessRef,\n    {\n      uid: input.uid,\n      email: input.email.trim().toLowerCase(),\n      workspaceRole: nextWorkspaceRole,\n      status: 'active',\n      companyRoles: {\n        ...(current?.companyRoles || {}),\n        [input.companyId]: input.role,\n      },\n      createdAt: current?.createdAt || now,\n      updatedAt: now,\n    } satisfies WorkspaceAccessDoc,\n    { merge: true }\n  );\n}\n\nexport async function ensureWorkspaceUserAccess(input: {\n  workspaceId: string;\n  uid: string;\n  email: string;\n}) {\n  const now = new Date().toISOString();\n  const key = accessKey(input.workspaceId, input.uid);\n\n  if (!firestore) {\n    if (!memoryAccess.has(key)) {\n      memoryAccess.set(key, {\n        uid: input.uid,\n        email: input.email.trim().toLowerCase(),\n        workspaceRole: 'viewer',\n        status: 'active',\n        companyRoles: {},\n        createdAt: now,\n        updatedAt: now,\n      });\n    }\n    return;\n  }\n\n  const accessRef = doc(firestore, 'workspaces', input.workspaceId, 'user_roles', input.uid);\n  const snap = await getDoc(accessRef);\n  if (snap.exists()) return;\n\n  await setDoc(\n    accessRef,\n    {\n      uid: input.uid,\n      email: input.email.trim().toLowerCase(),\n      workspaceRole: 'viewer',\n      status: 'active',\n      companyRoles: {},\n      createdAt: now,\n      updatedAt: now,\n    } satisfies WorkspaceAccessDoc\n  );\n}\n","\"use client\";\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/lib/firebase/auth-provider';\nimport { bootstrapCompanyCreatorMemberships, getUserCompanyPreference, setUserCompanyPreference, subscribeCompanies } from '@/lib/firebase/company-store';\nimport { subscribeCompanyMembers } from '@/lib/firebase/member-store';\nimport { ensureWorkspaceUserAccess } from '@/lib/firebase/workspace-access-store';\nimport { useAppState } from '@/components/shell/app-state';\nimport { applyCompanyTheme } from '@/lib/theme/company-theme';\n\nexport function CompanyContextProvider({ children }: { children: React.ReactNode }) {\n  const { user, loading } = useAuth();\n  const [accessReady, setAccessReady] = useState(false);\n  const {\n    appContext,\n    setAppContext,\n    companies,\n    setCompanies,\n    setActiveCompany,\n    markCompanyGateSeen,\n    setMembersByCompany,\n  } = useAppState();\n\n  useEffect(() => {\n    if (!user) return;\n\n    let active = true;\n    getUserCompanyPreference(user.uid).then((pref) => {\n      if (!active) return;\n      setAppContext((prev) => ({\n        ...prev,\n        workspaceId: pref.lastActiveWorkspaceId || prev.workspaceId || 'workspace-primary',\n        userId: user.uid,\n      }));\n\n      const hasActiveInSession =\n        typeof window !== 'undefined' && Boolean(window.sessionStorage.getItem('sb_active_company_id'));\n      if (!hasActiveInSession && pref.lastActiveCompanyId) {\n        setActiveCompany(pref.lastActiveCompanyId);\n      }\n    });\n\n    return () => {\n      active = false;\n    };\n  }, [setActiveCompany, setAppContext, user]);\n\n  useEffect(() => {\n    if (!user || loading) {\n      setAccessReady(false);\n      return;\n    }\n    let active = true;\n    ensureWorkspaceUserAccess({\n      workspaceId: appContext.workspaceId,\n      uid: user.uid,\n      email: user.email || `${user.uid}@local.test`,\n    })\n      .then(() => {\n        if (active) setAccessReady(true);\n      })\n      .catch(() => {\n        if (active) setAccessReady(true);\n      });\n\n    return () => {\n      active = false;\n    };\n  }, [appContext.workspaceId, loading, user]);\n\n  useEffect(() => {\n    if (!user || loading || !accessReady) return;\n    // Backfill memberships for older company docs created before membership-based listing was introduced.\n    bootstrapCompanyCreatorMemberships({\n      workspaceId: appContext.workspaceId,\n      uid: user.uid,\n      email: user.email || undefined,\n    }).catch(() => undefined);\n    return subscribeCompanies(appContext.workspaceId, user.uid, (next) => setCompanies(next), (message) => {\n      // Surface Firestore permission/config issues during development; production UI can wire this into a toast.\n      console.warn('[companies] subscribe failed:', message);\n      setCompanies([]);\n    });\n  }, [accessReady, appContext.workspaceId, loading, setCompanies, user]);\n\n  useEffect(() => {\n    if (!user || !appContext.activeCompanyId) return;\n    setUserCompanyPreference(user.uid, appContext.workspaceId, appContext.activeCompanyId).catch(() => undefined);\n    return subscribeCompanyMembers(appContext.workspaceId, appContext.activeCompanyId, (members) => {\n      setMembersByCompany((prev) => ({ ...prev, [appContext.activeCompanyId as string]: members }));\n    });\n  }, [appContext.activeCompanyId, appContext.workspaceId, setMembersByCompany, user]);\n\n  useEffect(() => {\n    if (!user) return;\n\n    if (!companies.length) {\n      if (appContext.activeCompanyId) {\n        setActiveCompany(null);\n      }\n      if (!appContext.companyGateSeenInSession) {\n        markCompanyGateSeen(true);\n      }\n      return;\n    }\n\n    if (companies.length === 1) {\n      const onlyCompanyId = companies[0].id;\n      if (appContext.activeCompanyId !== onlyCompanyId) {\n        setActiveCompany(onlyCompanyId);\n      }\n      if (!appContext.companyGateSeenInSession) {\n        markCompanyGateSeen(true);\n      }\n      return;\n    }\n\n    if (appContext.activeCompanyId && !companies.some((company) => company.id === appContext.activeCompanyId)) {\n      setActiveCompany(null);\n      if (appContext.companyGateSeenInSession) {\n        markCompanyGateSeen(false);\n      }\n    }\n  }, [\n    appContext.activeCompanyId,\n    appContext.companyGateSeenInSession,\n    companies,\n    markCompanyGateSeen,\n    setActiveCompany,\n    user,\n  ]);\n\n  useEffect(() => {\n    const activeCompany = companies.find((company) => company.id === appContext.activeCompanyId) || null;\n    applyCompanyTheme(activeCompany);\n  }, [appContext.activeCompanyId, companies]);\n\n  return <>{children}</>;\n}\n","import type { CompanyProfile, CompanyThemeTokens } from '@/types/interfaces';\n\nfunction normalizeHex(input: string, fallback: string) {\n  const value = (input || '').trim();\n  if (/^#[0-9a-fA-F]{6}$/.test(value)) return value;\n  if (/^#[0-9a-fA-F]{3}$/.test(value)) {\n    return `#${value[1]}${value[1]}${value[2]}${value[2]}${value[3]}${value[3]}`;\n  }\n  return fallback;\n}\n\nfunction hexToRgb(input: string) {\n  const value = normalizeHex(input, '#5ba0ff').slice(1);\n  return {\n    r: Number.parseInt(value.slice(0, 2), 16),\n    g: Number.parseInt(value.slice(2, 4), 16),\n    b: Number.parseInt(value.slice(4, 6), 16),\n  };\n}\n\nfunction rgba(hex: string, alpha: number) {\n  const { r, g, b } = hexToRgb(hex);\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\n\nfunction brighten(hex: string, amount: number) {\n  const { r, g, b } = hexToRgb(hex);\n  const next = (channel: number) => Math.min(255, Math.round(channel + (255 - channel) * amount));\n  return `#${[next(r), next(g), next(b)].map((x) => x.toString(16).padStart(2, '0')).join('')}`;\n}\n\nexport function buildCompanyTheme(company: CompanyProfile | null): CompanyThemeTokens {\n  const primary = normalizeHex(company?.branding.primary || '#5ba0ff', '#5ba0ff');\n  const secondary = normalizeHex(company?.branding.secondary || brighten(primary, 0.18), brighten(primary, 0.18));\n  const accent = normalizeHex(company?.branding.accent || brighten(primary, 0.32), brighten(primary, 0.32));\n\n  return {\n    primary,\n    secondary,\n    accent,\n    glow: rgba(primary, 0.28),\n    glowSoft: rgba(accent, 0.16),\n    border: rgba(accent, 0.42),\n    panelTint: rgba(primary, 0.12),\n  };\n}\n\nexport function applyCompanyTheme(company: CompanyProfile | null) {\n  if (typeof document === 'undefined') return;\n  const tokens = buildCompanyTheme(company);\n  const root = document.documentElement;\n  root.style.setProperty('--company-primary', tokens.primary);\n  root.style.setProperty('--company-secondary', tokens.secondary);\n  root.style.setProperty('--company-accent', tokens.accent);\n  root.style.setProperty('--company-glow', tokens.glow);\n  root.style.setProperty('--company-glow-soft', tokens.glowSoft);\n  root.style.setProperty('--company-border', tokens.border);\n  root.style.setProperty('--company-panel-tint', tokens.panelTint);\n}\n\n","\"use client\";\n\nimport { CompanyContextProvider } from '@/components/company/company-context-provider';\nimport { AppStateProvider } from '@/components/shell/app-state';\nimport { AuthProvider } from '@/lib/firebase/auth-provider';\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return (\n    <AuthProvider>\n      <AppStateProvider>\n        <CompanyContextProvider>{children}</CompanyContextProvider>\n      </AppStateProvider>\n    </AuthProvider>\n  );\n}\n\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}