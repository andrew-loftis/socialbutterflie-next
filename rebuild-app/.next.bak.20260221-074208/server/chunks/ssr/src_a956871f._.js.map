{"version":3,"sources":["../../../../src/components/ui/page-header.tsx","../../../../src/lib/hooks/use-active-company.ts","../../../../src/lib/hooks/use-company-posts.ts","../../../../src/app/%28app%29/review/page.tsx"],"sourcesContent":["export function PageHeader({ title, subtitle, actions }: { title: string; subtitle: string; actions?: React.ReactNode }) {\n  return (\n    <header className=\"page-header\">\n      <div>\n        <h1>{title}</h1>\n        <p>{subtitle}</p>\n      </div>\n      {actions ? <div className=\"page-actions\">{actions}</div> : null}\n    </header>\n  );\n}\r\n\r\n","\"use client\";\n\nimport { useMemo } from 'react';\nimport { useAppState } from '@/components/shell/app-state';\n\nexport function useActiveCompany() {\n  const { appContext, companies, setActiveCompany, markCompanyGateSeen } = useAppState();\n\n  const activeCompany = useMemo(\n    () => companies.find((company) => company.id === appContext.activeCompanyId) || null,\n    [appContext.activeCompanyId, companies]\n  );\n\n  return {\n    activeCompany,\n    activeCompanyId: appContext.activeCompanyId,\n    companies,\n    setActiveCompany: (companyId: string | null) => {\n      setActiveCompany(companyId);\n      markCompanyGateSeen(Boolean(companyId));\n    },\n  };\n}\n\n","\"use client\";\n\nimport { collection, onSnapshot, orderBy, query } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport { useAppState } from '@/components/shell/app-state';\nimport { firestore } from '@/lib/firebase/client';\n\nexport type CompanyPost = {\n  id: string;\n  status: 'draft' | 'in_review' | 'scheduled' | 'published' | 'failed';\n  caption: string;\n  scheduledFor?: string;\n  platform?: string;\n};\n\nconst memoryPosts: Record<string, CompanyPost[]> = {};\n\nexport function useCompanyPosts() {\n  const { appContext } = useAppState();\n  const activeCompanyId = appContext.activeCompanyId;\n  const key = `${appContext.workspaceId}:${activeCompanyId || 'none'}`;\n  const [posts, setPosts] = useState<CompanyPost[]>([]);\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    if (!activeCompanyId || !firestore) return;\n    const postsRef = collection(\n      firestore,\n      'workspaces',\n      appContext.workspaceId,\n      'companies',\n      activeCompanyId,\n      'posts'\n    );\n    const q = query(postsRef, orderBy('scheduledFor', 'asc'));\n    return onSnapshot(q, (snap) => {\n      setPosts(\n        snap.docs.map((entry) => ({\n          id: entry.id,\n          ...(entry.data() as Omit<CompanyPost, 'id'>),\n        }))\n      );\n      setLoaded(true);\n    });\n  }, [activeCompanyId, appContext.workspaceId]);\n\n  if (!activeCompanyId) {\n    return { posts: [], loading: false };\n  }\n\n  if (!firestore) {\n    return { posts: memoryPosts[key] || [], loading: false };\n  }\n\n  return { posts, loading: !loaded };\n}\n","\"use client\";\n\nimport Link from 'next/link';\nimport { PageHeader } from '@/components/ui/page-header';\nimport { useActiveCompany } from '@/lib/hooks/use-active-company';\nimport { useCompanyPosts } from '@/lib/hooks/use-company-posts';\n\nexport default function ReviewPage() {\n  const { activeCompany } = useActiveCompany();\n  const { posts } = useCompanyPosts();\n  const inReview = posts.filter((post) => post.status === 'in_review');\n\n  if (!activeCompany) {\n    return (\n      <section className=\"panel\">\n        <h3>No active company selected</h3>\n        <Link className=\"btn-primary\" href=\"/select-company\">Choose company</Link>\n      </section>\n    );\n  }\n\n  return (\n    <div className=\"page\">\n      <PageHeader\n        title={`${activeCompany.name} — Review Queue`}\n        subtitle={inReview.length ? `${inReview.length} post${inReview.length === 1 ? '' : 's'} awaiting approval.` : 'All caught up.'}\n      />\n\n      {inReview.length ? (\n        <section className=\"panel\">\n          <div className=\"button-row\" style={{ marginBottom: 16 }}>\n            <button className=\"btn-primary\" type=\"button\">Approve Selected</button>\n            <button className=\"btn-ghost\" type=\"button\">Reject Selected</button>\n          </div>\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th style={{ width: 36 }} />\n                <th>Scheduled</th>\n                <th>Platform</th>\n                <th>Caption</th>\n                <th>Status</th>\n                <th style={{ width: 120 }}>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {inReview.map((row) => (\n                <tr key={row.id}>\n                  <td><input type=\"checkbox\" /></td>\n                  <td style={{ whiteSpace: 'nowrap' }}>{row.scheduledFor || '—'}</td>\n                  <td>\n                    <span className=\"badge\">{row.platform || 'Unknown'}</span>\n                  </td>\n                  <td style={{ maxWidth: 320, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n                    {row.caption || '—'}\n                  </td>\n                  <td>\n                    <span className=\"badge\" style={{ textTransform: 'capitalize' }}>{row.status.replace('_', ' ')}</span>\n                  </td>\n                  <td>\n                    <div className=\"button-row\" style={{ gap: 6 }}>\n                      <button className=\"btn-primary\" type=\"button\" style={{ padding: '4px 10px', fontSize: '0.78rem' }}>Approve</button>\n                      <button className=\"btn-ghost\" type=\"button\" style={{ padding: '4px 10px', fontSize: '0.78rem' }}>Reject</button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </section>\n      ) : (\n        <section className=\"panel\">\n          <div className=\"empty-state\">\n            <div style={{\n              width: 48, height: 48, borderRadius: '50%',\n              background: 'var(--surface-2)', display: 'flex',\n              alignItems: 'center', justifyContent: 'center', margin: '0 auto 12px'\n            }}>\n              <svg width=\"22\" height=\"22\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5} style={{ color: 'var(--fg-muted)' }}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <p style={{ fontWeight: 600, marginBottom: 4 }}>Queue is clear</p>\n            <p style={{ color: 'var(--fg-muted)', fontSize: '0.85rem', marginBottom: 16 }}>No posts are waiting for review right now.</p>\n            <Link className=\"btn-primary\" href=\"/build\">Create a post</Link>\n          </div>\n        </section>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"wDAAO,SAAS,EAAW,OAAE,CAAK,UAAE,CAAQ,SAAE,CAAO,CAAkE,EACrH,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,wBAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAI,IACL,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAG,OAEL,EAAU,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBAAgB,IAAiB,OAGjE,mDCRA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,SAAS,IACd,GAAM,YAAE,CAAU,WAAE,CAAS,CAAE,kBAAgB,qBAAE,CAAmB,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IAOpF,MAAO,CACL,cANoB,CAAA,EAAA,EAAA,OAAA,AAAO,EAC3B,IAAM,EAAU,IAAI,CAAC,AAAC,GAAY,EAAQ,EAAE,GAAK,EAAW,eAAe,GAAK,KAChF,CAAC,EAAW,eAAe,CAAE,EAAU,EAKvC,gBAAiB,EAAW,eAAe,WAC3C,EACA,iBAAkB,AAAC,IACjB,EAAiB,GACjB,EAAoB,EAAQ,EAC9B,CACF,CACF,yDCpBA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAUA,IAAM,EAA6C,CAAC,EAE7C,SAAS,IACd,GAAM,YAAE,CAAU,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IAC5B,EAAkB,EAAW,eAAe,CAC5C,EAAM,CAAA,EAAG,EAAW,WAAW,CAAC,CAAC,EAAE,GAAmB,OAAA,CAAQ,CAC9D,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,EAAE,EAC9C,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,SAwBrC,CAtBA,CAAA,EAAA,AAsBI,EAtBJ,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,GAAmB,CAAC,EAAA,SAAS,CAAE,OACpC,IAAM,EAAW,CAAA,EAAA,EAAA,UAAA,AAAU,EACzB,EAAA,SAAS,CACT,aACA,EAAW,WAAW,CACtB,YACA,EACA,SAEI,EAAI,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,EAAU,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,eAAgB,QAClD,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAG,AAAC,IACpB,EACE,EAAK,IAAI,CAAC,GAAG,CAAC,AAAC,IAAW,CACxB,GADuB,AACnB,EAAM,EAAE,CACZ,GAAI,EAAM,IAAI,EAAE,CAClB,CAAC,GAEH,GAAU,EACZ,EACF,EAAG,CAAC,EAAiB,EAAW,WAAW,CAAC,EAEvC,GAIA,EAAA,SAAS,CAIP,CAJS,CAJM,KAQb,EAAO,QAAS,CAAC,CAAO,EAHxB,CAAE,MAAO,CAAW,CAAC,EAAI,EAAI,EAAE,CAAE,QAAS,EAAM,EAJhD,CAAE,MAAO,EAAE,CAAE,SAAS,CAAM,CAQvC,yECrDA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,eAAE,CAAa,CAAE,CAAG,CAAA,EAAA,EAAA,gBAAA,AAAgB,IACpC,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,eAAA,AAAe,IAC3B,EAAW,EAAM,MAAM,CAAC,AAAC,GAAyB,cAAhB,EAAK,MAAM,SAEnD,AAAK,EAUH,CAAA,CAVE,CAUF,EAAA,IAAA,EAAC,EAViB,IAUjB,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,MAAO,CAAA,EAAG,EAAc,IAAI,CAAC,eAAe,CAAC,CAC7C,SAAU,EAAS,MAAM,CAAG,CAAA,EAAG,EAAS,MAAM,CAAC,KAAK,EAAsB,IAApB,EAAS,MAAM,CAAS,GAAK,IAAI,mBAAmB,CAAC,CAAG,mBAG/G,EAAS,MAAM,CACd,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,kBACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,aAAa,MAAO,CAAE,aAAc,EAAG,YACpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,cAAc,KAAK,kBAAS,qBAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,YAAY,KAAK,kBAAS,uBAE9C,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,kBACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,MAAO,EAAG,IACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,cACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,aACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,YACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,MAAO,GAAI,WAAG,iBAG/B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,eAChB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,WAAY,QAAS,WAAI,EAAI,YAAY,EAAI,MAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iBAAS,EAAI,QAAQ,EAAI,cAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,SAAU,IAAK,SAAU,SAAU,aAAc,WAAY,WAAY,QAAS,WAC5F,EAAI,OAAO,EAAI,MAElB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,QAAQ,MAAO,CAAE,cAAe,YAAa,WAAI,EAAI,MAAM,CAAC,OAAO,CAAC,IAAK,SAE3F,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,aAAa,MAAO,CAAE,IAAK,CAAE,YAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,cAAc,KAAK,SAAS,MAAO,CAAE,QAAS,WAAY,SAAU,SAAU,WAAG,YACnG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,YAAY,KAAK,SAAS,MAAO,CAAE,QAAS,WAAY,SAAU,SAAU,WAAG,kBAf9F,EAAI,EAAE,WAwBvB,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAU,iBACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CACV,MAAO,GAAI,OAAQ,GAAI,aAAc,MACrC,WAAY,mBAAoB,QAAS,OACzC,WAAY,SAAU,eAAgB,SAAU,OAAQ,aAC1D,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,KAAK,OAAO,QAAQ,YAAY,OAAO,eAAe,YAAa,IAAK,MAAO,CAAE,MAAO,iBAAkB,WACpI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,EAAE,oEAGzD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,WAAY,IAAK,aAAc,CAAE,WAAG,mBAChD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,kBAAmB,SAAU,UAAW,aAAc,EAAG,WAAG,+CAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,UAAU,cAAc,KAAK,kBAAS,0BAtElD,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,kBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,+BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,UAAU,cAAc,KAAK,2BAAkB,qBA0E7D"}