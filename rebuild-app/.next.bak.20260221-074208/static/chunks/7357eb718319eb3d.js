(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93842,e=>{"use strict";var t=e.i(43476);function s({title:e,subtitle:s,actions:a}){return(0,t.jsxs)("header",{className:"page-header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:e}),(0,t.jsx)("p",{children:s})]}),a?(0,t.jsx)("div",{className:"page-actions",children:a}):null]})}e.s(["PageHeader",()=>s])},15562,e=>{"use strict";var t=e.i(71645),s=e.i(3638);function a(){let{appContext:e,companies:a,setActiveCompany:i,markCompanyGateSeen:n}=(0,s.useAppState)();return{activeCompany:(0,t.useMemo)(()=>a.find(t=>t.id===e.activeCompanyId)||null,[e.activeCompanyId,a]),activeCompanyId:e.activeCompanyId,companies:a,setActiveCompany:e=>{i(e),n(!!e)}}}e.s(["useActiveCompany",()=>a])},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},82320,e=>{"use strict";var t=e.i(71645),s=e.i(15562);function a(){let{activeCompany:e}=(0,s.useActiveCompany)(),a=(0,t.useMemo)(()=>e?.assets||[],[e]);return{assets:a,hasAssets:a.length>0}}e.s(["useCompanyAssets",()=>a])},89669,e=>{"use strict";var t=e.i(43476),s=e.i(22016),a=e.i(71645),i=e.i(89853),n=e.i(75254);let l=(0,n.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),r=(0,n.default)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]),o=(0,n.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),c=(0,n.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var d=e.i(14764);let p=(0,n.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var h=e.i(83086),m=e.i(68983),x=e.i(93842),u=e.i(3638),y=e.i(15562),f=e.i(82320),g=e.i(95938);let v=["Instagram","Facebook","LinkedIn","TikTok"];function j(){let{user:e}=(0,g.useAuth)(),{appContext:n}=(0,u.useAppState)(),{activeCompany:j}=(0,y.useActiveCompany)(),{assets:b}=(0,f.useCompanyAssets)(),[S,k]=(0,a.useState)("Instagram"),[N,w]=(0,a.useState)(""),[C,I]=(0,a.useState)(""),[z,A]=(0,a.useState)(""),[T,D]=(0,a.useState)(""),[M,P]=(0,a.useState)(!1),[F,U]=(0,a.useState)(null),W={Instagram:"instagram",Facebook:"facebook",TikTok:"tiktok",LinkedIn:null};async function L(t){let s=W[S];if(!s)return void U(`${S} scheduling is not wired yet. Connect Instagram/Facebook/TikTok for now.`);if(!e?.uid)return void U("Sign in to schedule posts.");if(!T.trim())return void U("Media URL is required for scheduling.");if("pending"===t&&!z)return void U("Schedule time is required.");P(!0),U(null);try{let a="pending"===t?new Date(z).toISOString():new Date(Date.now()+3e5).toISOString(),i=await fetch("/.netlify/functions/api?path=/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.uid,org_id:n.workspaceId,provider:s,caption:N,mediaUrl:T.trim(),when:a,workflowStatus:t,campaignId:C||void 0})});if(!i.ok)throw Error(await i.text());U("draft"===t?"Saved as draft.":"review"===t?"Submitted for review.":"Post scheduled.")}catch(e){U(e instanceof Error?e.message:"Failed to save post.")}finally{P(!1)}}return j?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(x.PageHeader,{title:"Build Post",subtitle:`Compose with ${j.name} context, then schedule.`,actions:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"btn-ghost btn-sm",type:"button",children:[(0,t.jsx)(h.Sparkles,{className:"h-3.5 w-3.5"})," AI assist"]}),(0,t.jsxs)("button",{className:"btn-primary btn-sm",type:"button",onClick:()=>L("pending"),disabled:M,children:[(0,t.jsx)(i.CalendarDays,{className:"h-3.5 w-3.5"})," Schedule Post"]})]})}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:12},children:[(0,t.jsxs)("section",{className:"panel",children:[(0,t.jsx)("h3",{style:{position:"relative",zIndex:1},children:"Composer"}),(0,t.jsx)("div",{style:{display:"flex",gap:6,position:"relative",zIndex:1},children:v.map(e=>(0,t.jsx)("button",{className:`chip${S===e?" active":""}`,type:"button",onClick:()=>k(e),children:e},e))}),(0,t.jsxs)("div",{style:{position:"relative",zIndex:1},children:[(0,t.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,t.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Caption"}),(0,t.jsx)("textarea",{rows:6,placeholder:`Write your ${S} caption for ${j.name}…`,value:N,onChange:e=>w(e.target.value)})]}),(0,t.jsxs)("div",{style:{textAlign:"right",fontSize:"0.72rem",color:"var(--muted)",marginTop:4},children:[N.length," chars"]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,position:"relative",zIndex:1},children:[(0,t.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,t.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Campaign"}),(0,t.jsx)("input",{placeholder:"Campaign name",value:C,onChange:e=>I(e.target.value)})]}),(0,t.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,t.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Schedule"}),(0,t.jsx)("input",{type:"datetime-local",value:z,onChange:e=>A(e.target.value)})]})]}),(0,t.jsxs)("label",{style:{display:"flex",flexDirection:"column",gap:6,position:"relative",zIndex:1},children:[(0,t.jsx)("span",{style:{fontSize:"0.78rem",color:"var(--muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.08em"},children:"Media URL"}),(0,t.jsx)("input",{placeholder:"https://.../image-or-video.jpg",value:T,onChange:e=>D(e.target.value)})]}),(0,t.jsxs)("div",{className:"upload-zone",style:{position:"relative",zIndex:1},children:[(0,t.jsx)(r,{className:"h-5 w-5",style:{color:"var(--muted)"}}),(0,t.jsxs)("span",{style:{fontSize:"0.82rem",color:"var(--muted)"},children:["Drag & drop media, or ",(0,t.jsx)("span",{style:{color:"var(--company-primary)",cursor:"pointer"},children:"browse"})]}),b.length>0&&(0,t.jsxs)("span",{style:{fontSize:"0.72rem",color:"var(--muted)"},children:[b.length," company assets available"]})]}),(0,t.jsxs)("div",{className:"button-row",style:{position:"relative",zIndex:1},children:[(0,t.jsx)("button",{className:"btn-ghost",type:"button",onClick:()=>L("draft"),disabled:M,children:"Save draft"}),(0,t.jsx)("button",{className:"btn-ghost",type:"button",onClick:()=>L("review"),disabled:M,children:"Submit for review"}),(0,t.jsxs)("button",{className:"btn-primary",type:"button",onClick:()=>L("pending"),disabled:M,children:[(0,t.jsx)(d.Send,{className:"h-3.5 w-3.5"})," Schedule Post"]})]}),F?(0,t.jsx)("p",{className:"text-sm text-[var(--muted)]",children:F}):null]}),(0,t.jsxs)("aside",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,t.jsx)("div",{className:"phone-outer",children:(0,t.jsxs)("div",{className:"phone-frame",children:[(0,t.jsx)("div",{className:"phone-notch"}),(0,t.jsxs)("div",{className:"phone-screen",children:[(0,t.jsx)("div",{className:"phone-safe-top"}),"Instagram"===S&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"phone-ig-header",children:[(0,t.jsx)("div",{className:"phone-ig-avatar"}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"#fff"},children:j.name}),(0,t.jsx)("div",{style:{fontSize:9,color:"rgba(255,255,255,0.5)"},children:"Sponsored"})]}),(0,t.jsx)(c,{style:{width:14,color:"rgba(255,255,255,0.5)"}})]}),(0,t.jsx)("div",{className:"phone-ig-media",children:b[0]?.thumbnailUrl?(0,t.jsx)("img",{src:b[0].thumbnailUrl,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,t.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(r,{style:{width:28,color:"rgba(255,255,255,0.2)"}})})}),(0,t.jsxs)("div",{className:"phone-ig-actions",children:[(0,t.jsx)(l,{style:{width:18,color:"#fff"}}),(0,t.jsx)(o,{style:{width:18,color:"#fff"}}),(0,t.jsx)(p,{style:{width:18,color:"#fff"}})]}),(0,t.jsxs)("div",{style:{padding:"4px 10px 8px",fontSize:10,color:"#fff",lineHeight:1.4},children:[(0,t.jsx)("strong",{children:j.name})," ",N||(0,t.jsx)("span",{style:{opacity:.4},children:"Your caption will appear here…"})]})]}),"Instagram"!==S&&(0,t.jsxs)("div",{className:"phone-content-area",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8},children:[(0,t.jsxs)("div",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",textAlign:"center"},children:[S," preview"]}),(0,t.jsx)("div",{style:{fontSize:9,color:"rgba(255,255,255,0.3)",textAlign:"center"},children:N||"Caption preview"})]}),(0,t.jsx)("div",{className:"phone-safe-bottom"}),(0,t.jsx)("div",{className:"phone-home-bar"})]})]})}),(0,t.jsxs)("div",{className:"panel",style:{fontSize:"0.8rem"},children:[(0,t.jsx)("p",{className:"kicker",style:{position:"relative",zIndex:1},children:"AI Assist"}),(0,t.jsxs)("p",{style:{color:"var(--muted)",position:"relative",zIndex:1},children:["Generate a caption using ",j.name,"'s brand voice and guidelines."]}),(0,t.jsxs)("button",{className:"btn-ghost btn-sm",type:"button",style:{position:"relative",zIndex:1},children:[(0,t.jsx)(h.Sparkles,{className:"h-3.5 w-3.5"})," Generate caption"]})]})]})]})]}):(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-state-icon",children:(0,t.jsx)(m.WandSparkles,{className:"h-6 w-6"})}),(0,t.jsx)("h3",{children:"No company selected"}),(0,t.jsx)(s.default,{className:"btn-primary",href:"/select-company",children:"Choose company"})]})}e.s(["default",()=>j],89669)}]);