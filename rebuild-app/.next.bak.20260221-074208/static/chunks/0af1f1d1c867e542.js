(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93842,e=>{"use strict";var a=e.i(43476);function i({title:e,subtitle:i,actions:t}){return(0,a.jsxs)("header",{className:"page-header",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:e}),(0,a.jsx)("p",{children:i})]}),t?(0,a.jsx)("div",{className:"page-actions",children:t}):null]})}e.s(["PageHeader",()=>i])},15562,e=>{"use strict";var a=e.i(71645),i=e.i(3638);function t(){let{appContext:e,companies:t,setActiveCompany:s,markCompanyGateSeen:n}=(0,i.useAppState)();return{activeCompany:(0,a.useMemo)(()=>t.find(a=>a.id===e.activeCompanyId)||null,[e.activeCompanyId,t]),activeCompanyId:e.activeCompanyId,companies:t,setActiveCompany:e=>{s(e),n(!!e)}}}e.s(["useActiveCompany",()=>t])},95468,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],95468)},39312,37046,e=>{"use strict";var a=e.i(75254);let i=(0,a.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>i],39312);var t=e.i(43476),s=e.i(71645),n=e.i(95468);let r=(0,a.default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var o=e.i(55436);let c=(0,a.default)("unplug",[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]]),l=(0,a.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=e.i(95938),p=e.i(3638);function h(e,a){if(!e?.uid)throw Error("Sign in is required.");if(!a)throw Error("Workspace id is required.");return{userId:e.uid,workspaceId:a}}async function m(e,a,i){let{userId:t,workspaceId:s}=h(e,a);if(!i)throw Error("Company id is required.");let n=`/.netlify/functions/api?path=/connections&user_id=${encodeURIComponent(t)}&org_id=${encodeURIComponent(s)}&group_id=${encodeURIComponent(i)}`,r=await fetch(n,{cache:"no-store"});if(!r.ok)throw Error(await r.text());return await r.json()}async function u(e,a,i){let{userId:t,workspaceId:s}=h(e,a),n=await fetch("/.netlify/functions/api?path=/disconnect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i.id,provider:i.provider,user_id:t,org_id:s})});if(!n.ok)throw Error(await n.text())}let y=["All","Social","Analytics","Notifications","Storage","AI"],g=[{id:"instagram",name:"Instagram",description:"Connect Instagram Business via Meta OAuth.",category:"Social",color:"#e1306c",capabilities:["Posts","Stories (planned)","Reels (planned)"],provider:"instagram"},{id:"facebook",name:"Facebook Pages",description:"Connect Facebook Pages for post scheduling and publishing.",category:"Social",color:"#1877f2",capabilities:["Posts","Scheduled posts"],provider:"facebook"},{id:"linkedin",name:"LinkedIn",description:"OAuth support planned. Add organization posting after app review setup.",category:"Social",color:"#0a66c2",capabilities:["Posts (planned)","Company pages (planned)"]},{id:"tiktok",name:"TikTok",description:"Connect TikTok Business. Publishing requires app approval.",category:"Social",color:"#101010",capabilities:["Videos","Direct publish (approved apps)"],provider:"tiktok"},{id:"youtube",name:"YouTube",description:"Connect YouTube for Shorts/video upload and scheduling.",category:"Social",color:"#ff0000",capabilities:["Shorts","Video upload","Scheduling"],provider:"youtube"}];function f({companyId:e,companyName:a}){let{user:f}=(0,d.useAuth)(),{appContext:x}=(0,p.useAppState)(),[v,j]=(0,s.useState)(""),[k,b]=(0,s.useState)("All"),[w,C]=(0,s.useState)(!0),[N,S]=(0,s.useState)(null),[I,A]=(0,s.useState)([]);async function P(){if(!f){A([]),C(!1);return}C(!0);try{let a=await m(f,x.workspaceId,e);A(a.map(e=>({id:e.id,provider:e.provider,label:e.label}))),S(null)}catch(e){S(e instanceof Error?e.message:"Failed to load connections.")}finally{C(!1)}}(0,s.useEffect)(()=>{P().catch(()=>void 0)},[x.workspaceId,e,f?.uid]);let T=(0,s.useMemo)(()=>new Set(I.map(e=>(e.provider||"").toLowerCase()).filter(Boolean)),[I]),$=g.filter(e=>{let a="All"===k||e.category===k,i=v.trim().toLowerCase(),t=!i||e.name.toLowerCase().includes(i)||e.description.toLowerCase().includes(i)||e.capabilities.some(e=>e.toLowerCase().includes(i));return a&&t}),L=g.filter(e=>e.provider&&T.has(e.provider)).length;async function E(e){if(e.provider)try{let i=I.find(a=>a.provider?.toLowerCase()===e.provider);await u(f,x.workspaceId,{id:i?.id,provider:e.provider}),await P(),S(`${e.name} disconnected for ${a}.`)}catch(e){S(e instanceof Error?e.message:"Disconnect failed.")}}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-sm text-[var(--muted)]",children:["Connections for ",(0,t.jsx)("strong",{children:a})," only."]}),(0,t.jsx)("div",{className:"panel",style:{padding:"10px 14px"},children:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,position:"relative",zIndex:1},children:[(0,t.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:y.map(e=>(0,t.jsx)("button",{className:`chip${k===e?" active":""}`,type:"button",onClick:()=>b(e),children:e},e))}),(0,t.jsxs)("div",{className:"search-wrap",style:{width:280},children:[(0,t.jsx)(o.Search,{className:"h-3.5 w-3.5",style:{position:"absolute",left:10,color:"var(--muted)",pointerEvents:"none"}}),(0,t.jsx)("input",{className:"search-input",placeholder:"Search integrations...",value:v,onChange:e=>j(e.target.value),style:{paddingLeft:30}})]})]})}),N?(0,t.jsx)("p",{className:"text-sm text-[var(--muted)]",children:N}):null,(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:[(0,t.jsx)(i,{className:"inline h-3 w-3"})," ",L," connected for this company."]}),w?(0,t.jsx)("div",{className:"panel",children:(0,t.jsx)("p",{children:"Loading connections..."})}):$.length?(0,t.jsx)("section",{className:"integrations-grid",children:$.map(a=>{let i=!!a.provider&&T.has(a.provider);return(0,t.jsxs)("article",{className:`integration-card${i?" connected":""}`,children:[(0,t.jsxs)("div",{className:"integration-header",children:[(0,t.jsx)("div",{className:"integration-icon",style:{background:`${a.color}22`,border:`1px solid ${a.color}44`},children:(0,t.jsx)("span",{style:{width:10,height:10,borderRadius:999,background:a.color,display:"inline-block"}})}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("div",{className:"integration-name",children:a.name}),(0,t.jsx)("div",{className:"integration-category",children:a.category})]}),i?(0,t.jsx)(n.CheckCircle2,{className:"h-4 w-4",style:{color:"#3dd68c",flexShrink:0}}):(0,t.jsx)(l,{className:"h-4 w-4",style:{color:"var(--muted)",flexShrink:0,opacity:.4}})]}),(0,t.jsx)("p",{className:"integration-desc",children:a.description}),(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:a.capabilities.map(e=>(0,t.jsx)("span",{className:"chip",children:e},e))}),(0,t.jsx)("div",{className:"integration-footer",children:i?(0,t.jsxs)("button",{className:"btn-ghost btn-sm",type:"button",onClick:()=>E(a),children:[(0,t.jsx)(c,{className:"h-3.5 w-3.5"})," Disconnect"]}):(0,t.jsxs)("button",{className:"btn-primary btn-sm",type:"button",onClick:()=>(function(a){if(!a.provider)return void S(`${a.name} connector is planned but not wired yet.`);try{!function(e,a,i,t){let{userId:s,workspaceId:n}=h(e,a),r=new URL("/.netlify/functions/auth",window.location.origin);r.searchParams.set("action","begin"),r.searchParams.set("provider",i),r.searchParams.set("user_id",s),r.searchParams.set("org_id",n),t&&r.searchParams.set("group_id",t),window.location.href=r.toString()}(f,x.workspaceId,a.provider,e)}catch(e){S(e instanceof Error?e.message:"Connect failed.")}})(a),children:[(0,t.jsx)(r,{className:"h-3.5 w-3.5"})," Connect"]})})]},a.id)})}):(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-state-icon",children:(0,t.jsx)(i,{className:"h-6 w-6"})}),(0,t.jsx)("h3",{children:"No integrations found"}),(0,t.jsx)("p",{children:"Try a different search term or category filter."})]})]})}e.s(["CompanyIntegrations",()=>f],37046)},2214,e=>{"use strict";var a=e.i(43476),i=e.i(22016),t=e.i(39312),s=e.i(93842),n=e.i(15562),r=e.i(37046);function o(){let{activeCompany:e}=(0,n.useActiveCompany)();return e?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(s.PageHeader,{title:"Integrations",subtitle:`Manage social connections for ${e.name}.`,actions:(0,a.jsx)(i.default,{className:"btn-ghost btn-sm",href:`/companies/${e.id}/integrations`,children:"Open company page"})}),(0,a.jsx)(r.CompanyIntegrations,{companyId:e.id,companyName:e.name})]}):(0,a.jsxs)("div",{className:"empty-state",children:[(0,a.jsx)("div",{className:"empty-state-icon",children:(0,a.jsx)(t.Zap,{className:"h-6 w-6"})}),(0,a.jsx)("h3",{children:"No company selected"}),(0,a.jsx)("p",{children:"Integrations are company-scoped. Select a company first."}),(0,a.jsx)(i.default,{className:"btn-primary",href:"/select-company",children:"Choose company"})]})}e.s(["default",()=>o])}]);